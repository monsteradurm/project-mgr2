<div *ngIf="(ErrorMessage$ | async) as errorMessage; else overviewblock">
  <pre class="pm-console-error"> {{ errorMessage }}</pre>
</div>

<ng-template #overviewblock>
    <!-- OVERVIEW -->

      <ng-container *ngIf="(SelectedElement$ | async) as selected">
        <app-view-task-dlg 
            [Item]="SelectedElement$ | async" 
            [SyncReview$]="SyncReviews$ | FilterSyncReviewsByItem$ : selected"
          (onClose)="onViewTaskClosed()"></app-view-task-dlg>
      </ng-container>

    <ng-container *ngIf="(GroupsMenu$ | async) as groupsMenu">
      <nav mat-tab-nav-bar
            pmTabUnderline [primaryColor]="primaryColor">

        <ng-container *ngIf="(Departments$ | async) as departments">
          <ng-container *ngIf="(Department$ | async) as department">
              <a mat-tab-link *ngFor="let d of departments"
              (click)="SetDepartment(d)" [active]="department.id == d.id"> {{d.text}} </a>
          </ng-container>
          <a mat-tab-link style="font-style: italic;" *ngIf="departments.length < 1">
            No Departments Within Board.
          </a>
        </ng-container>
        <div fxLayout="row" fxLayoutAlign="end center" style="position:absolute;right:20px;">

          <div fxLayout="row" fxLayoutAlign="start end" style="margin-right:15px;height:34px">
            <mat-icon class="search-icon">search</mat-icon>
            <mat-form-field pmFocusLabel pmFocusInput [primaryColor]="primaryColor"
              style="max-width:200px;top:-9px;height:100%" >
              <input matInput class="search-input">
            </mat-form-field> 
          </div>
          <ng-container *ngIf="(SortByMenu$ | async) as SortByMenu">
            <div class="directors-menu-container">
              <ng-container *actionOutlet="SortByMenu"></ng-container>
            </div>
          </ng-container>

        <ng-container *ngIf="(DirectorsMenu$ | async) as DirectorsMenu">
          <div class="directors-menu-container">
            <ng-container *actionOutlet="DirectorsMenu"></ng-container>
          </div>
        </ng-container>

        <ng-container *ngIf="(ArtistsMenu$ | async) as ArtistsMenu">
          <div class="artists-menu-container">
            <ng-container *actionOutlet="ArtistsMenu"></ng-container>
          </div>
        </ng-container>

        <ng-container *ngIf="(StatusMenu$ | async) as StatusMenu">
          <div class="status-menu-container">
            <ng-container *actionOutlet="StatusMenu"></ng-container>
          </div>
        </ng-container>

        <div class="collection-container">
          <ng-container *actionOutlet="groupsMenu"></ng-container>
        </div>
      </div>

      </nav>

      <div fxLayout="Row" style="padding-top:30px;overflow-x:hidden" fxLayoutAlign="center stretch"
      *ngIf="(BoardItems$ | FilterItemsByDepartment$ : Department$ | FilterItemsByStatus$ : IgnoredStatus$ | 
              FilterItemsByArtist$ : IgnoredArtists$ | FilterItemsByDirector$ : IgnoredDirectors$ | async) as items" >
        <div class="pm-console-error" *ngIf="items?.length < 1" style="width:calc(100vw);position:absolute">
          This Project/Board/Group currently has no Items to Track.
        </div>

        <div class="element-overview" fxLayout="column" fxLayoutAlign="start stretch">
          <app-overview-boarditem *ngFor="let item of items;trackby:" [boarditem]="item"
          (dblclick)="onSelectItem(item)"
          ></app-overview-boarditem>
        </div>

      <!-- GANTT -->

        <app-overview-gantt [BoardItems]="items"></app-overview-gantt>

      </div>
    </ng-container>
</ng-template>