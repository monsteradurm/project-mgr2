<p-dialog #viewTaskDlg [(visible)]="Show" [modal]="true" [dismissableMask]="true" [showHeader]="false"
[style]="{width: '75vw', height:'85vh', overflow: 'hidden', 'border-radius':'5px'}"  *ngIf="Item">
        <ng-container *ngIf="(Item?.status | GetTaskStatus) as Status">
            

                <div style="background: white !important;overflow:hidden !important" fxLayout="column">
                    <div fxLayout="row" fxLayoutAlign="space-between center" class="task-dlg-header"
                         [style.background-color]="Status.color">

                        <h2 class="dialog-header view-task-header" style="color:white !important;">
                            {{Item?.element}}
                            <span *ngIf="Item?.department">({{Item?.department | ArrayToStr : 'text'}})</span>
                        </h2>
                        <h2 class="dialog-status-header" style="color:white !important">
                            {{Status.text}}
                        </h2>
                    </div>

                    <p-scrollPanel  fxLayout="row" fxLayoutAlign="start stretch" class="viewTaskScroll"
                        [style]="{width: '75vw', height: 'calc(85vh - 52px)', overflow: 'hidden'}"  *ngIf="(SubItems$ | async) as SubItems">  
                        <div fxLayout="row" fxLayoutAlign="stretch stretch" style="height:100%">
 
                                <mat-toolbar fxLayout="column" fxLayoutAlign="stretch stretch" class="side-dlg-toolbar">

                                    <button mat-flat-button (click)="SelectedSubItem = Item.id"
                                        [ngClass]="{'side-btn-active' : SelectedSubItem == Item.id}"> {{Item.task}} 
                                        <div  [style.background]="Status.color"
                                            [ngClass]="{ 'side-btn-active' : Item.id == SelectedSubItem, 
                                            'side-btn-inactive' : Item.id != SelectedSubItem }"></div>
                                    </button>  
                            
                                <ng-container *ngFor="let subitem of SubItems">
                                    <button mat-flat-button (click)="SelectedSubItem = subitem.id" 
                                    [ngClass]="{'side-btn-active' : SelectedSubItem == subitem.id}"> 
                                        {{subitem.name}}
                                        <div [style.background]="Status.color"
                                            [ngClass]="{ 'side-btn-active' : subitem?.id == SelectedSubItem, 
                                            'side-btn-inactive' : subitem?.id != SelectedSubItem }" ></div> 
                                    </button>
                                </ng-container>
                                
                            </mat-toolbar>

                        <div fxLayout="row" fxLayoutAlign="start start" *ngIf="(View$ | async) as View" 
                        style="width:100%;height:100%;padding:20px 30px;">
                            <pre>{{View | json}}</pre>
                        </div>
                    </div>
                </p-scrollPanel>
            </div>
            
        </ng-container>
</p-dialog>
